<link rel="import" href="../polymer/polymer.html">

<!--

`paper-datatable-api-column` is a column which is used in `paper-datatable-api`.

    <paper-datatable-api-column header="Fruit" property="fruit">
      <template>
        <span>{{value}}</span>
      </template>
    </paper-datatable-api-column>

@element paper-datatable-api-column
-->
<dom-module id="paper-datatable-api-column">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <content></content>
  </template>

  <script>
    Polymer({

      is: 'paper-datatable-api-column',

      properties: {
        /**
         * The name of the header for this column.
         */
        header: String,
        /**
         * Property which will be available in data (throught paper-datatable-api).
         */
        property: String,
        /**
         * If set, these other properties will be available in data (throught paper-datatable-api).
         * Usefull to keep id of the object.
         */
        otherProperties: {
          type: Array,
          value: [],
        },
        /**
         * If true, the colum can be sort.
         */
        sortable: {
          type: Boolean,
          value: false,
        },
        /**
         * If true, the column is hidden.
         */
        hidden: {
          type: Boolean,
          value: false,
        },
        /**
         * Current sort direction (asc or desc).
         */
        sortDirection: String,
        /**
         * If true, the column is currently sorted.
         */
        sorted: {
          type: Boolean,
          value: false,
        },
        /**
         * If true, the column can be filtered.
         */
        filter: {
          type: Boolean,
          value: false,
        },
        /**
         * If true, a date picker is displayed when the column is sorted.
         */
        date: {
          type: Boolean,
          value: false,
        },
        /**
         * If true, the column will be hidden.
         */
        hideable: {
          type: Boolean,
          value: false,
        },
        /**
         * Position of the column in the table.
         */
        position: Number,
        activeFilter: {
          type: Boolean,
          value: false,
        },
      },

      behaviors: [
        Polymer.Templatizer
      ],

      ready: function() {
        var props = {};
        props.__key__ = true;
        props[this.header] = true;
        props[this.property] = true;
        this._instanceProps = props;

        var template = Polymer.dom(this).querySelector('template');
        this.templatize(template);
      },

      /**
       * Stamp the value in template (according to property).
       *
       * @property fillTemplate
       * @param {String} value The value of the property.
       */
      fillTemplate: function(value, otherValues) {
        var instance = this.stamp({ value: value, otherValues: otherValues });
        return instance;
      },
    });
  </script>
</dom-module>
